(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},r=[],s=0;s<n.length;s++){var l=n[s],u=o.base?l[0]+o.base:l[0],d=i[u]||0,c="".concat(u," ").concat(d);i[u]=d+1;var p=t(c),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var g=a(m,o);o.byIndex=s,e.splice(s,0,{identifier:c,updater:g,references:1})}r.push(c)}return r}function a(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,a){var i=o(n=n||[],a=a||{});return function(n){n=n||[];for(var r=0;r<i.length;r++){var s=t(i[r]);e[s].references--}for(var l=o(n,a),u=0;u<i.length;u++){var d=t(i[u]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,a,i){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var u=0;u<n.length;u++){var d=[].concat(n[u]);o&&r[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},368:(n,e,t)=>{n.exports=t.p+"ce93393e831d32412096.woff2"},417:n=>{n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},425:(n,e,t)=>{n.exports=t.p+"df607770dd56217f1c94.woff2"},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},552:(n,e,t)=>{t.d(e,{A:()=>p});var o=t(601),a=t.n(o),i=t(314),r=t.n(i),s=t(417),l=t.n(s),u=new URL(t(968),t.b),d=r()(a()),c=l()(u);d.push([n.id,`.page-container {\n    padding: 0 20px;\n}\n\n.page-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #e0e0e0;\n    padding: 20px 16px;\n    margin-left: -20px;\n    margin-right: -20px;\n}\n\n.logo {\n    margin: 0;\n    font-size: 28px;\n    cursor: pointer;\n    width: 130px;\n}\n\n.header-container {\n    margin-bottom: 8px;\n}\n\n.header-button {\n    padding: 0;\n    border: none;\n    background-color: transparent;\n    font-size: 14px;\n    line-height: 18px;\n    font-weight: 500;\n    cursor: pointer;\n}\n\n.logout-button {\n    width: 130px;\n    text-align: right;\n}\n\n.posts {\n    display: flex;\n    flex-direction: column;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\n.post-header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 10px;\n    cursor: pointer;\n}\n\n.post-header__user-data {\n    display: flex;\n    align-items: center;\n}\n\n.post-header__user-image {\n    width: 40px;\n    height: 40px;\n    object-fit: cover;\n    border-radius: 40px;\n    margin-right: 10px;\n}\n\n.post-image-container {\n    margin-left: -20px;\n    margin-right: -20px;\n    height: 500px;\n    display: flex;\n    justify-content: center;\n    background-color: #e0e0e0;\n}\n\n.post-image {\n    width: 100%;\n    height: 100%;\n    max-width: 500px;\n    object-fit: cover;\n}\n\n.post-likes {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.post-likes-count {\n    cursor: pointer;\n}\n\n.like-button {\n    border: none;\n    background-color: transparent;\n    padding: 8px;\n    padding-left: 0px;\n    padding-bottom: 5px;\n    cursor: pointer;\n}\n\n.like-button:hover {\n    scale: 1.1;\n}\n\n.user-name {\n    font-weight: 500;\n}\n\n.post-text {\n    font-size: 14px;\n    line-height: 18px;\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n.post-date {\n    color: #8a8a8a;\n}\n\n.post + .post {\n    margin-top: 20px;\n}\n\n.post {\n    padding-bottom: 20px;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.posts-user-header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    margin-bottom: 12px;\n}\n\n.post-user-heading {\n    font-size: 26px;\n}\n\n.post-user-header-image {\n    width: 120px;\n    height: 120px;\n    border-radius: 60px;\n}\n\n.post-user-content {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    gap: 15px;\n}\n\n.posts-user-header__user-image {\n    width: 70px;\n    height: 70px;\n    object-fit: cover;\n    border-radius: 40px;\n    margin-right: 10px;\n}\n\n.posts-user-header__user-name {\n    font-size: 28px;\n    line-height: 35px;\n}\n\n.loading-page {\n    display: flex;\n    justify-content: center;\n    margin-top: 100px;\n}\n\n.add-post-sign {\n    background-image: url(${c});\n    height: 30px;\n    width: 30px;\n}\n\n.form {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n}\n\n.form-title {\n    font-size: 28px;\n    line-height: 35px;\n    text-align: center;\n}\n\n.form-inputs {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.form-error {\n    color: red;\n}\n\n.form-footer {\n    margin-top: 50px;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.form-footer-title {\n    text-align: center;\n}\n\n.file-upload-image-conrainer {\n    display: flex;\n    align-items: center;\n}\n\n.file-upload-image {\n    width: 100px;\n    height: 100px;\n    object-fit: cover;\n    margin-right: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n\n.file-upload-label {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 100%;\n    text-align: center;\n}\n\n.add-post-container {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n\n.post-user-header {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding-bottom: 10px;\n    margin-bottom: 10px;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.post-user-name {\n    font-size: 26px;\n    font-weight: 500;\n}\n\n.post-modal-container {\n    width: 330px;\n    max-height: 400px;\n    top: 50%;\n    position: fixed;\n    z-index: 1;\n    background-color: #fff;\n    box-shadow: 0 0 8px 5px rgba(94, 94, 95, 0.5);\n    padding: 20px;\n    flex-direction: column;\n}\n\n.post-modal-content {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n}\n\n.post-modal-header {\n    font-weight: bold;\n}\n\n.button-close-modal {\n    font-size: 30px;\n    cursor: pointer;\n}\n\n.delete-post-button {\n    font-size: 30px;\n}\n\n.post-modal-list {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.user-item {\n    display: flex;\n    align-items: center;\n}\n`,""]);const p=d},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},727:(n,e,t)=>{t.d(e,{A:()=>g});var o=t(601),a=t.n(o),i=t(314),r=t.n(i),s=t(417),l=t.n(s),u=new URL(t(368),t.b),d=new URL(t(425),t.b),c=r()(a()),p=l()(u),m=l()(d);c.push([n.id,`/* \n  Это стили Дизайн системы, сквозные стили для элементов интерфейса\n  всего приложения: шрифты, кнопки, инпуты и так далее\n*/\n\n@font-face {\n  font-family: "StratosSkyeng";\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${p}) format("woff2");\n}\n\n@font-face {\n  font-family: "StratosSkyeng";\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${m}) format("woff2");\n}\n\nhtml {\n  /* скрывает скролбары в firefox */\n  scrollbar-width: none;\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: StratosSkyeng;\n  overflow: auto;\n  font-size: 14px;\n  line-height: 18px;\n}\n\n/* скрывает скролбары в chrome */\nbody::-webkit-scrollbar {\n  display: none;\n}\n\np {\n  margin: 0;\n}\n\n.button,\n.secondary-button {\n  display: block;\n  padding: 10px 13px 13px;\n  font-size: 18px;\n  line-height: 22px;\n  border-radius: 5px;\n  background-color: #565eef;\n  color: #ffffff;\n  border: none;\n}\n\n.link-button {\n  display: inline;\n  border: 0;\n  padding: 0;\n  background: none;\n  color: #565eef;\n  cursor: pointer;\n}\n\n.button:hover {\n  background-color: #6d73ff;\n}\n\n.button[disabled="true"],\n.secondary-button[disabled="true"] {\n  background-color: #f4f5f6;\n  color: rgba(153, 153, 153, 0.6);\n  pointer-events: none;\n}\n\n.button:active {\n  background-color: #4f56ce;\n}\n\n.secondary-button {\n  background-color: #edecff;\n  color: #565eef;\n}\n\n.secondary-button:hover {\n  background-color: #f2eeff;\n}\n\n.secondary-button:active {\n  background-color: #d8d7ff;\n}\n\n.input {\n  height: 36px;\n  box-sizing: border-box;\n  padding: 15px;\n  font-size: 14px;\n  line-height: 18px;\n  color: rgb(4, 18, 27);\n  border: none;\n  border-radius: 5px;\n  background-color: #e8e8e8;\n}\n\n.input .-error {\n  background-color: #fff;\n}\n\n.input:focus {\n  background-color: #fff;\n}\n\n.textarea {\n  padding: 15px;\n  resize: none;\n  width: 100%;\n  height: 100px;\n}\n\nstrong {\n  font-weight: 500;\n}\n\n/** Анимация загрузки **/\n.loader {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.loader div {\n  display: inline-block;\n  position: absolute;\n  left: 8px;\n  width: 16px;\n  background: #000;\n  animation: loader 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;\n}\n.loader div:nth-child(1) {\n  left: 8px;\n  animation-delay: -0.24s;\n}\n.loader div:nth-child(2) {\n  left: 32px;\n  animation-delay: -0.12s;\n}\n.loader div:nth-child(3) {\n  left: 56px;\n  animation-delay: 0;\n}\n@keyframes loader {\n  0% {\n    top: 8px;\n    height: 64px;\n  }\n  50%,\n  100% {\n    top: 24px;\n    height: 32px;\n  }\n}\n`,""]);const g=c},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,a&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},968:n=>{n.exports="data:image/svg+xml,%3Csvg id=%27Layer_1%27 data-name=%27Layer 1%27 xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 122.88 122.88%27%3E%3Ctitle%3Eadd%3C/title%3E%3Cpath d=%27M61.44,0A61.46,61.46,0,1,1,18,18,61.25,61.25,0,0,1,61.44,0ZM88.6,56.82v9.24a4,4,0,0,1-4,4H70V84.62a4,4,0,0,1-4,4H56.82a4,4,0,0,1-4-4V70H38.26a4,4,0,0,1-4-4V56.82a4,4,0,0,1,4-4H52.84V38.26a4,4,0,0,1,4-4h9.24a4,4,0,0,1,4,4V52.84H84.62a4,4,0,0,1,4,4Zm8.83-31.37a50.92,50.92,0,1,0,14.9,36,50.78,50.78,0,0,0-14.9-36Z%27/%3E%3C/svg%3E"}},e={};function t(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.m=n,t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.p="/social-network/",t.b=document.baseURI||self.location.href,t.nc=void 0,t.d({},{gf:()=>fn,dg:()=>vn,ri:()=>hn,Yl:()=>gn,kQ:()=>pn});var o=t(72),a=t.n(o),i=t(825),r=t.n(i),s=t(659),l=t.n(s),u=t(56),d=t.n(u),c=t(540),p=t.n(c),m=t(113),g=t.n(m),f=t(552),h={};h.styleTagTransform=g(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=p(),a()(f.A,h),f.A&&f.A.locals&&f.A.locals;var v=t(727),b={};b.styleTagTransform=g(),b.setAttributes=d(),b.insert=l().bind(null,"head"),b.domAPI=r(),b.insertStyleElement=p(),a()(v.A,b),v.A&&v.A.locals&&v.A.locals;const y="https://wedev-api.sky.pro",x=`${y}/api/v1/pavekatal/instapro`,w="posts",k="user-posts",M="auth",S="add-post",E="loading";function P({element:n}){return n.innerHTML=`\n  <div class="page-header">\n      <h1 class="logo">instapro</h1>\n      <button class="header-button add-or-login-button">\n      ${pn?'<div title="Добавить пост" class="add-post-sign"></div>':"Войти"}\n      </button>\n      ${pn?`<button title="${pn.name}" class="header-button logout-button">Выйти</button>`:""}  \n  </div>\n  `,n.querySelector(".add-or-login-button").addEventListener("click",(()=>{vn(pn?S:M)})),n.querySelector(".logo").addEventListener("click",(()=>{vn(w)})),n.querySelector(".logout-button")?.addEventListener("click",hn),n}function W({element:n,onImageUrlChange:e}){let t="";const o=()=>{n.innerHTML=`\n      <div class="upload-image">\n        ${t?`\n            <div class="file-upload-image-container">\n              <img class="file-upload-image" src="${t}" alt="Загруженное изображение">\n              <button class="file-upload-remove-button button">Заменить фото</button>\n            </div>\n            `:'\n            <label class="file-upload-label secondary-button">\n              <input\n                type="file"\n                class="file-upload-input"\n                style="display:none"\n              />\n              Выберите фото\n            </label>\n          '}\n      </div>\n    `;const a=n.querySelector(".file-upload-input");a?.addEventListener("change",(()=>{const n=a.files[0];if(n){const a=document.querySelector(".file-upload-label");a.setAttribute("disabled",!0),a.textContent="Загружаю файл...",function({file:n}){const e=new FormData;return e.append("file",n),fetch(y+"/api/upload/image",{method:"POST",body:e}).then((n=>n.json()))}({file:n}).then((({fileUrl:n})=>{t=n,e(t),o()}))}})),n.querySelector(".file-upload-remove-button")?.addEventListener("click",(()=>{t="",e(t),o()}))};o()}const G=(n,e,t,o)=>{e.querySelectorAll(".like-button").forEach((a=>{a.addEventListener("click",(async i=>{i.stopPropagation();const r=a.dataset.postId,s=a.querySelector("img").src.includes("like-active.svg");if(!t)return alert("Необходимо авторизоваться"),void vn(M);try{let a;a=s?await function({token:n,postId:e}){return fetch(`${x}/${e}/dislike`,{method:"POST",headers:{Authorization:n}}).then((n=>{if(!n.ok)throw new Error("При выполнении операции Убрать лайк произошла ошибка");return n.json()}))}({token:t,postId:r}):await function({token:n,postId:e}){return fetch(`${x}/${e}/like`,{method:"POST",headers:{Authorization:n}}).then((n=>{if(n.ok)return n.json();if(401===n.status)throw new Error("Чтобы поставить лайк, необходимо авторизоваться");throw new Error("При выполнении операции Поставить лайк произошла ошибка")}))}({token:t,postId:r});const i=o.findIndex((n=>n.id===a.post.id));o[i]=a.post,n({appEl:e,posts:o})}catch(n){console.log(n),n.responce&&401===n.response.status&&(alert("Сессия истекла. Пожалуйста, авторизуйтесь"),vn(M))}}))}))};function $(n){return n.replace(/<[^>]*>/g,"").replace(/&lt;/g,"").replace(/\//g,"").replace(/b&gt;/g,"").replace(/&/g,"").replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"").trim().replace(/\s+/g," ")}const T=n=>{document.querySelectorAll(".delete-post-button").forEach((e=>{e.addEventListener("click",(async t=>{if(t.stopPropagation(),console.log("user:",pn),!n)return alert("Необходимо авторизоваться"),void vn(M);let o=pn._id;const a=e.dataset.postId,i=e.closest(".post").querySelector(".post-header").dataset.userId;if(console.log("authorId:",i),console.log("user.id:",o),i===o)try{return confirm("Вы уверены, что хотите удалить пост? ")?(await function({token:n,postId:e}){return fetch(`${x}/${e}`,{method:"DELETE",headers:{Authorization:n}}).then((n=>{if(401===n.status)throw new Error("В процессе удаления поста произошла ошибка");return n.json()}))}({token:n,postId:a}),console.log("Пост успешно удален"),vn(w)):void console.log("Удаление поста отменено")}catch(n){n.response&&401===n.response.status?alert("Сессия истекла. Пожалуйста, авторизуйтесь"):alert("В процессе удаления поста произошла ошибка")}else alert("Нельзя удалить чужой пост")}))}))},A=(Math.pow(10,8),43200),C=Symbol.for("constructDateFrom");function I(n,e){return"function"==typeof n?n(e):n&&"object"==typeof n&&C in n?n[C](e):n instanceof Date?new n.constructor(e):new Date(e)}const D={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function N(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const L={date:N({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:N({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:N({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},j={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function q(n){return(e,t)=>{let o;if("formatting"===(t?.context?String(t.context):"standalone")&&n.formattingValues){const e=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):e;o=n.formattingValues[a]||n.formattingValues[e]}else{const e=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;o=n.values[a]||n.values[e]}return o[n.argumentCallback?n.argumentCallback(e):e]}}function z(n){return(e,t={})=>{const o=t.width,a=o&&n.matchPatterns[o]||n.matchPatterns[n.defaultMatchWidth],i=e.match(a);if(!i)return null;const r=i[0],s=o&&n.parsePatterns[o]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(s)?function(n){for(let e=0;e<n.length;e++)if(n[e].test(r))return e}(s):function(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&n[e].test(r))return e}(s);let u;return u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u,{value:u,rest:e.slice(r.length)}}}function _(n){return(e,t={})=>{const o=e.match(n.matchPattern);if(!o)return null;const a=o[0],i=e.match(n.parsePattern);if(!i)return null;let r=n.valueCallback?n.valueCallback(i[0]):i[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(a.length)}}}const H={code:"en-US",formatDistance:(n,e,t)=>{let o;const a=D[n];return o="string"==typeof a?a:1===e?a.one:a.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+o:o+" ago":o},formatLong:L,formatRelative:(n,e,t,o)=>j[n],localize:{ordinalNumber:(n,e)=>{const t=Number(n),o=t%100;if(o>20||o<10)switch(o%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:q({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:q({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:q({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:q({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:q({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:_({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:n=>parseInt(n,10)}),era:z({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:z({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:n=>n+1}),month:z({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:z({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:z({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let U={};function O(){return U}function X(n,e){return I(e||n,n)}function F(n){const e=X(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Y(n,...e){const t=I.bind(null,n||e.find((n=>"object"==typeof n)));return e.map(t)}function J(n,e){const t=+X(n)-+X(e);return t<0?-1:t>0?1:t}function B(n,e){const t=X(n,e?.in);return+function(n,e){const t=X(n,e?.in);return t.setHours(23,59,59,999),t}(t,e)==+function(n,e){const t=X(n,e?.in),o=t.getMonth();return t.setFullYear(t.getFullYear(),o+1,0),t.setHours(23,59,59,999),t}(t,e)}function V(n,e,t){const[o,a,i]=Y(t?.in,n,n,e),r=J(a,i),s=Math.abs(function(n,e,t){const[o,a]=Y(t?.in,n,e);return 12*(o.getFullYear()-a.getFullYear())+(o.getMonth()-a.getMonth())}(a,i));if(s<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-r*s);let l=J(a,i)===-r;B(o)&&1===s&&1===J(o,i)&&(l=!1);const u=r*(s-+l);return 0===u?0:u}function R(n,e,t){const o=function(n,e){return+X(n)-+X(e)}(n,e)/1e3;return(a=t?.roundingMethod,n=>{const e=(a?Math[a]:Math.trunc)(n);return 0===e?0:e})(o);var a}function Q(n,e){return function(n,e,t){const o=O(),a=t?.locale??o.locale??H,i=J(n,e);if(isNaN(i))throw new RangeError("Invalid time value");const r=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:i}),[s,l]=Y(t?.in,...i>0?[e,n]:[n,e]),u=R(l,s),d=(F(l)-F(s))/1e3,c=Math.round((u-d)/60);let p;if(c<2)return t?.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,r):u<10?a.formatDistance("lessThanXSeconds",10,r):u<20?a.formatDistance("lessThanXSeconds",20,r):u<40?a.formatDistance("halfAMinute",0,r):u<60?a.formatDistance("lessThanXMinutes",1,r):a.formatDistance("xMinutes",1,r):0===c?a.formatDistance("lessThanXMinutes",1,r):a.formatDistance("xMinutes",c,r);if(c<45)return a.formatDistance("xMinutes",c,r);if(c<90)return a.formatDistance("aboutXHours",1,r);if(c<1440){const n=Math.round(c/60);return a.formatDistance("aboutXHours",n,r)}if(c<2520)return a.formatDistance("xDays",1,r);if(c<A){const n=Math.round(c/1440);return a.formatDistance("xDays",n,r)}if(c<86400)return p=Math.round(c/A),a.formatDistance("aboutXMonths",p,r);if(p=V(l,s),p<12){const n=Math.round(c/A);return a.formatDistance("xMonths",n,r)}{const n=p%12,e=Math.trunc(p/12);return n<3?a.formatDistance("aboutXYears",e,r):n<9?a.formatDistance("overXYears",e,r):a.formatDistance("almostXYears",e+1,r)}}(n,function(n){return I(n,Date.now())}(n),e)}function Z(n,e){if(void 0!==n.one&&1===e)return n.one;const t=e%10,o=e%100;return 1===t&&11!==o?n.singularNominative.replace("{{count}}",String(e)):t>=2&&t<=4&&(o<10||o>20)?n.singularGenitive.replace("{{count}}",String(e)):n.pluralGenitive.replace("{{count}}",String(e))}function K(n){return(e,t)=>t?.addSuffix?t.comparison&&t.comparison>0?n.future?Z(n.future,e):"через "+Z(n.regular,e):n.past?Z(n.past,e):Z(n.regular,e)+" назад":Z(n.regular,e)}const nn={lessThanXSeconds:K({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:K({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(n,e)=>e?.addSuffix?e.comparison&&e.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:K({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:K({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:K({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:K({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:K({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:K({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:K({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:K({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:K({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:K({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:K({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:K({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:K({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},en={date:N({formats:{full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},defaultWidth:"full"}),time:N({formats:{full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:N({formats:{any:"{{date}}, {{time}}"},defaultWidth:"any"})};function tn(n,e){const t=O(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=X(n,e?.in),i=a.getDay(),r=(i<o?7:0)+i-o;return a.setDate(a.getDate()-r),a.setHours(0,0,0,0),a}function on(n,e,t){const[o,a]=Y(t?.in,n,e);return+tn(o,t)==+tn(a,t)}const an=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function rn(n){const e=an[n];return 2===n?"'во "+e+" в' p":"'в "+e+" в' p"}const sn={lastWeek:(n,e,t)=>{const o=n.getDay();return on(n,e,t)?rn(o):function(n){const e=an[n];switch(n){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}(o)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(n,e,t)=>{const o=n.getDay();return on(n,e,t)?rn(o):function(n){const e=an[n];switch(n){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}(o)},other:"P"},ln={ordinalNumber:(n,e)=>{const t=Number(n),o=e?.unit;let a;return a="date"===o?"-е":"week"===o||"minute"===o||"second"===o?"-я":"-й",t+a},era:q({values:{narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},defaultWidth:"wide"}),quarter:q({values:{narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:q({values:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},defaultWidth:"wide",formattingValues:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},defaultFormattingWidth:"wide"}),day:q({values:{narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},defaultWidth:"wide"}),dayPeriod:q({values:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},defaultWidth:"any",formattingValues:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},defaultFormattingWidth:"wide"})},un={code:"ru",formatDistance:(n,e,t)=>nn[n](e,t),formatLong:en,formatRelative:(n,e,t,o)=>{const a=sn[n];return"function"==typeof a?a(e,t,o):a},localize:ln,match:{ordinalNumber:_({matchPattern:/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,parsePattern:/\d+/i,valueCallback:n=>parseInt(n,10)}),era:z({matchPatterns:{narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^д/i,/^н/i]},defaultParseWidth:"any"}),quarter:z({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:n=>n+1}),month:z({matchPatterns:{narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},defaultParseWidth:"any"}),day:z({matchPatterns:{narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},defaultParseWidth:"any"}),dayPeriod:z({matchPatterns:{narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function dn({appEl:n}){const e=`\n        <div class="page-container">\n            <div class="header-container"></div>\n                <ul class="posts">${gn.map(((n,e)=>{const t=Q(n.createdAt,{addSuffix:!0,locale:un});let o,a=n.isLiked?'<img src="./assets/images/like-active.svg"></img>':'<img src="./assets/images/like-not-active.svg"></img>';return o=0===n.likes.length?"0":1===n.likes.length?`${$(n.likes[0].name)}`:2===n.likes.length?`${$(n.likes[0].name)} и еще 1`:`${n.likes.length}`,`<li class="post" data-post-index="${e}"> \n                    <div class="post-header" data-user-id="${n.user.id}">\n                        <div class="post-header__user-data">\n                            <img src="${n.user.imageUrl}" class="post-header__user-image">\n                            <p class="post-header__user-name">${$(n.user.name)}</p>\n                        </div>\n                        <div>\n                            <button data-post-id="${n.id}" class="header-button delete-post-button">×</button>\n                        </div>\n                    </div>\n                    <div class="post-image-container">\n                      <img class="post-image" src="${n.imageUrl}">\n                    </div>\n                    <div class="post-likes">\n                      <button data-post-id="${n.id}" class="like-button">\n                        ${a}\n                      </button>\n                      <p class="post-likes-text">\n                        Нравится: <strong class="post-likes-count">${o}</strong>\n                      </p>\n                      <div class="post-modal-container" style="display: none">\n                        <div class="post-modal-content">\n                            <p class="post-modal-header">Пользователи, которым понравился пост</p>\n                            <span class="button-close-modal">&times;</span>\n                        </div>\n                        <div class="post-modal-list"></div>\n                      </div>\n                    </div>\n                    <p class="post-text">\n                      <span class="user-name">${$(n.user.name)}</span>\n                      ${$(n.description)}\n                    </p>\n                    <p class="post-date">\n                      ${t}\n                    </p>\n                  </li>`})).join("")}</ul>\n        </div>`;n.innerHTML=e,G(dn,n,fn(),gn),T(fn()),(n=>{const e=document.querySelectorAll(".post-likes-count"),t=document.querySelector(".post-modal-container"),o=document.querySelector(".post-modal-list"),a=document.querySelector(".button-close-modal");e.forEach(((e,a)=>{e.addEventListener("click",(()=>{var e;e=n[a].likes,o.innerHTML="",e.forEach((e=>{const t=e.id;console.log("userIdFromLikes:",t);const a=e.name,i=n.find((n=>n.user.id===t));if(i){const n=document.createElement("div");n.classList.add("user-item");const e=document.createElement("img");e.src=i.user.imageUrl,e.classList.add("post-header__user-image");const t=document.createElement("p");t.textContent=a,n.appendChild(e),n.appendChild(t),o.appendChild(n)}})),t.style.display="flex"}))})),a.addEventListener("click",(()=>{t.style.display="none"}))})(gn),console.log("Актуальный список постов:",gn),P({element:document.querySelector(".header-container")});for(let n of document.querySelectorAll(".post-header"))n.addEventListener("click",(()=>{vn(k,{userId:n.dataset.userId})}))}function cn({appEl:n,posts:e}){if(!e||0===e.length)return void(n.innerHTML="<p>У этого пользователя нет публикаций</p>");const t=e[0].user,o=e.map(((n,e)=>{const t=Q(n.createdAt,{addSuffix:!0,locale:un});let o,a=n.isLiked?'<img src="./assets/images/like-active.svg"></img>':'<img src="./assets/images/like-not-active.svg"></img>';return o=0===n.likes.length?"0":1===n.likes.length?`${$(n.likes[0].name)}`:2===n.likes.length?`${$(n.likes[0].name)} и еще 1`:`${n.likes.length}`,`<li class="post" data-post-index="${e}"> \n                    <div class="post-header" data-user-id="${n.user.id}">\n                        <div class="post-header__user-data">\n                            <img src="${n.user.imageUrl}" class="post-header__user-image">\n                            <p class="post-header__user-name">${$(n.user.name)}</p>\n                        </div>\n                        <div>\n                            <button data-post-id="${n.id}" class="header-button delete-post-button">×</button>\n                        </div>\n                    </div>\n                    <div class="post-image-container">\n                      <img class="post-image" src="${n.imageUrl}">\n                    </div>\n                    <div class="post-likes">\n                      <button data-post-id="${n.id}" class="like-button">\n                        ${a}\n                      </button>\n                      <p class="post-likes-text">\n                        Нравится: <strong class="post-likes-count">${o}</strong>\n                      </p>\n                      <div class="post-modal-container" style="display: none">\n                        <div class="post-modal-content">\n                            <p class="post-modal-header">Пользователи, которым понравился пост</p>\n                            <span class="button-close-modal">&times;</span>\n                        </div>\n                        <div class="post-modal-list"></div>\n                      </div>\n                    </div>\n                    <p class="post-text">\n                      <span class="user-name">${$(n.user.name)}</span>\n                      ${$(n.description)}\n                    </p>\n                    <p class="post-date">\n                      ${t}\n                    </p>\n                  </li>`})).join(""),a=`\n        <div class="page-container">\n            <div class="header-container"></div>\n            <div class="post-user-header">\n                <h3 class="post-user-heading">Публикации пользователя</h3> \n                <div class="post-user-content">\n                    <img class="post-header__user-image post-user-header-image" src="${t.imageUrl}">\n                    <p class="post-user-name">${$(t.name)}</p>\n                </div>\n            </div> \n            <ul class="posts">${o}</ul>\n        </div>`;console.log(pn),n.innerHTML=a,G(cn,n,fn(),e),T(fn()),(n=>{const e=document.querySelectorAll(".post-likes-count"),t=document.querySelector(".post-modal-container"),o=document.querySelector(".post-modal-list"),a=document.querySelector(".button-close-modal");e.forEach(((e,a)=>{e.addEventListener("click",(()=>{var e;e=n[a].likes,o.innerHTML="",e.forEach((n=>{const e=n._id;console.log("userIdFromLikes:",e);const t=n.name,a=document.createElement("div");a.classList.add("user-item");const i=document.createElement("img");i.src=n.imageUrl,i.classList.add("post-header__user-image");const r=document.createElement("p");r.textContent=t,a.appendChild(i),a.appendChild(r),o.appendChild(a)})),t.style.display="flex"}))})),a.addEventListener("click",(()=>{t.style.display="none"}))})(e),console.log("Актуальный список постов:",e),P({element:document.querySelector(".header-container")});for(let n of document.querySelectorAll(".post-header"))n.addEventListener("click",(()=>{vn(k,{userId:n.dataset.userId})}))}let pn=function(){try{return JSON.parse(window.localStorage.getItem("user"))}catch(n){return null}}(),mn=null,gn=[];const fn=()=>pn?`Bearer ${pn.token}`:void 0,hn=()=>{pn=null,window.localStorage.removeItem("user"),vn(w)},vn=(n,e)=>{if([w,M,S,k,E].includes(n))return n===S?(mn=pn?S:M,bn()):n===w?(mn=E,bn(),function({token:n}){return fetch(x,{method:"GET",headers:{Authorization:n}}).then((n=>{if(401===n.status)throw new Error("Нет авторизации");return n.json()})).then((n=>n.posts))}({token:fn()}).then((n=>{mn=w,gn=n,bn()})).catch((n=>{console.error(n),vn(w)}))):n===k?(console.log("Открываю страницу пользователя: ",e.userId),gn=[],mn=E,bn(),function({token:n,userId:e}){return fetch(`${x}/user-posts/${e}`,{method:"GET",headers:{Authorization:n}}).then((n=>{if(!n.ok)throw new Error("Ошибка при получении постов пользователя");return n.json()}))}({token:fn(),userId:e.userId}).then((n=>{mn=k,gn=n.posts,bn()})).catch((n=>{console.error(n),vn(w)}))):(mn=n,void bn());throw new Error("страницы не существует")},bn=()=>{const n=document.getElementById("app");return mn===E?function({appEl:n,user:e,goToPage:t}){n.innerHTML='\n              <div class="page-container">\n                <div class="header-container"></div>\n                <div class="loading-page">\n                  <div class="loader"><div></div><div></div><div></div></div>\n                </div>\n              </div>',P({user:e,element:document.querySelector(".header-container"),goToPage:t})}({appEl:n,user:pn,goToPage:vn}):mn===M?function({appEl:n,setUser:e}){let t=!0,o="";const a=()=>{const i=`\n      <div class="page-container">\n          <div class="header-container"></div>\n          <div class="form">\n              <h3 class="form-title">\n                ${t?"Вход в&nbsp;Instapro":"Регистрация в&nbsp;Instapro"}\n              </h3>\n              <div class="form-inputs">\n                  ${t?"":'\n                      <div class="upload-image-container"></div>\n                      <input type="text" id="name-input" class="input" placeholder="Имя" />\n                      '}\n                  <input type="text" id="login-input" class="input" placeholder="Логин" />\n                  <input type="password" id="password-input" class="input" placeholder="Пароль" />\n                  <div class="form-error"></div>\n                  <button class="button" id="login-button">${t?"Войти":"Зарегистрироваться"}</button>\n              </div>\n              <div class="form-footer">\n                <p class="form-footer-title">\n                  ${t?"Нет аккаунта?":"Уже есть аккаунт?"}\n                  <button class="link-button" id="toggle-button">\n                    ${t?"Зарегистрироваться.":"Войти."}\n                  </button>\n                </p>\n              </div>\n          </div>\n      </div>    \n    `;n.innerHTML=i;const r=e=>{n.querySelector(".form-error").textContent=e};P({element:document.querySelector(".header-container")});const s=n.querySelector(".upload-image-container");s&&W({element:s,onImageUrlChange(n){o=n}}),document.getElementById("login-button").addEventListener("click",(()=>{if(r(""),t){const n=document.getElementById("login-input").value,t=document.getElementById("password-input").value;if(!n)return void alert("Введите логин");if(!t)return void alert("Введите пароль");(function({login:n,password:e}){return fetch(y+"/api/user/login",{method:"POST",body:JSON.stringify({login:n,password:e})}).then((n=>{if(400===n.status)throw new Error("Неверный логин или пароль");return n.json()}))})({login:n,password:t}).then((n=>{e(n.user)})).catch((n=>{console.warn(n),r(n.message)}))}else{const n=document.getElementById("login-input").value,t=document.getElementById("name-input").value,a=document.getElementById("password-input").value;if(!t)return void alert("Введите имя");if(!n)return void alert("Введите логин");if(!a)return void alert("Введите пароль");if(!o)return void alert("Не выбрана фотография");(function({login:n,password:e,name:t,imageUrl:o}){return fetch(y+"/api/user",{method:"POST",body:JSON.stringify({login:n,password:e,name:t,imageUrl:o})}).then((n=>{if(400===n.status)throw new Error("Такой пользователь уже существует");return n.json()}))})({login:n,password:a,name:t,imageUrl:o}).then((n=>{e(n.user)})).catch((n=>{console.warn(n),r(n.message)}))}})),document.getElementById("toggle-button").addEventListener("click",(()=>{t=!t,a()}))};a()}({appEl:n,setUser:n=>{pn=n,function(n){window.localStorage.setItem("user",JSON.stringify(n))}(pn),vn(w)},user:pn,goToPage:vn}):mn===S?function({appEl:n,onAddPostClick:e}){let t="";n.innerHTML='\n            <div class="page-container">\n            <div class="header-container"></div>\n            <div class="add-post-container">\n                <h3>Cтраница добавления поста</h3> \n                <div class="upload-image-container"></div>\n                <input type="text" class="input add-input-post" placeholder="Введите описание поста"/>\n                <button class="button" id="add-button">Добавить</button>\n            </div>\n            </div>\n        ',P({element:document.querySelector(".header-container")}),W({element:document.querySelector(".upload-image-container"),onImageUrlChange(n){t=n,console.log(t)}}),document.getElementById("add-button").addEventListener("click",(()=>{const n=document.querySelector(".add-input-post").value;n||t?n?t?e({description:n,imageUrl:t}):alert("Загрузите фото"):alert("Добавьте описание к посту"):alert("Загрузите фото и добавьте к нему описание")}))}({appEl:n,onAddPostClick({description:n,imageUrl:e}){(function({token:n,description:e,imageUrl:t}){return fetch(x,{method:"POST",headers:{Authorization:n},body:JSON.stringify({description:e,imageUrl:t,forceError:!0})}).then((n=>{if(400===n.status)throw new Error("Запрос содержит ошибку");return n.json()}))})({token:fn(),description:n,imageUrl:e}).then((()=>{console.log("Добавляю пост...",{description:n,imageUrl:e}),vn(w)})).catch((n=>{console.log("Ошибка при добавлении поста:",n),alert("Ошибка при добавлении поста")}))}}):mn===w?dn({appEl:n}):mn===k?cn({appEl:n,posts:gn}):void 0};vn(w)})();